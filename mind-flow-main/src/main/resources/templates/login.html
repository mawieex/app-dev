<!DOCTYPE html>
<html>
<head lang="en" xmlns:th="http://www.thymeleaf.org">
<meta charset="UTF-8">
<title>Login - MindFlow</title>
<link rel="stylesheet" th:href="@{/login.css}">
<!-- Add SweetAlert2 CSS and JS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>
	<!-- Login Error Message -->
	<div th:if="${param.error}" class="error-message" style="color: red; text-align: center; margin-bottom: 10px;">
		Invalid email or password.
	</div>

	<!-- Logout Success Message -->
	<div th:if="${param.logout}" class="logout-message" style="color: green; text-align: center; margin-bottom: 10px;">
		You have been logged out successfully.
	</div>

	<form th:action="@{/user/login}" method="post">
		<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
		<label>Email:</label>
		<input type="email" name="email" required autofocus> <br>
		<label>Password:</label>
		<input type="password" name="password" required> <br>
		<button type="submit">Login</button>
		<p><a href="/forgot-password" class="link">Forgot Password?</a></p>
		<p>Don't have an account? <a th:href="@{/user/new}" class="link">Register here</a></p>
	</form>

	<!-- Add script for general popup messages (e.g., from registration success) -->
	<script th:if="${message}" th:inline="javascript">
		Swal.fire({
			title: 'Success!',
			text: /*[[${message}]]*/ '',
			icon: 'success',
			confirmButtonText: 'OK'
		});
	</script>

	<!-- Optional: If you want to use SweetAlert for login error specifically -->
	<script th:if="${param.error}" th:inline="javascript">
		Swal.fire({
			title: 'Login Failed!',
			text: 'Invalid email or password.',
			icon: 'error',
			confirmButtonText: 'OK'
		});
	</script>

	<!-- Optional: If you want to use SweetAlert for logout success specifically -->
	<script th:if="${param.logout}" th:inline="javascript">
		Swal.fire({
			title: 'Logged Out!',
			text: 'You have been logged out successfully.',
			icon: 'info',
			confirmButtonText: 'OK'
		});
	</script>
</body>
</html>
